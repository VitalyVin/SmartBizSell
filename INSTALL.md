# Инструкция по установке личного кабинета SmartBizSell

## Требования

- PHP 7.4 или выше
- MySQL 8.0
- Веб-сервер (Apache/Nginx)
- PDO расширение для PHP

## Установка

### 1. Настройка базы данных

1. Войдите в панель управления вашего хостинга reg.ru
2. Создайте новую базу данных MySQL 8.0
3. Создайте пользователя базы данных и назначьте ему права на базу данных
4. Запомните следующие данные:
   - Имя базы данных
   - Имя пользователя
   - Пароль
   - Хост (обычно `localhost`)

### 2. Импорт структуры базы данных

1. Откройте файл `db/schema.sql` в текстовом редакторе
2. Войдите в phpMyAdmin или используйте консоль MySQL
3. Выполните SQL скрипт из файла `db/schema.sql`

Или через командную строку:
```bash
mysql -u your_username -p your_database_name < db/schema.sql
```

### 3. Настройка конфигурации

Откройте файл `config.php` и обновите следующие параметры:

```php
define('DB_HOST', 'localhost'); // Хост БД (обычно localhost)
define('DB_NAME', 'smartbizsell'); // Имя вашей базы данных
define('DB_USER', 'your_db_user'); // Имя пользователя БД
define('DB_PASS', 'your_db_password'); // Пароль БД
define('BASE_URL', 'https://smartbizsell.ru'); // Ваш домен
define('ADMIN_EMAIL', 'admin@smartbizsell.ru'); // Email администратора
```

### 4. Настройка прав доступа

Убедитесь, что файлы имеют правильные права доступа:
```bash
chmod 644 config.php
chmod 755 db/
```

### 5. Проверка подключения

Откройте в браузере страницу регистрации:
```
https://your-domain.com/register.php
```

Если страница загружается без ошибок, подключение к БД настроено правильно.

## Структура файлов

- `config.php` - Конфигурация БД и функции
- `register.php` - Страница регистрации
- `login.php` - Страница входа
- `logout.php` - Выход из системы
- `dashboard.php` - Личный кабинет продавца
- `db/schema.sql` - SQL скрипт для создания структуры БД
- `index.php` - Главная страница (обновлена для работы с БД)

## Функциональность

### Для продавцов:

1. **Регистрация** - создание аккаунта с email и паролем
2. **Вход** - авторизация в системе
3. **Личный кабинет** - просмотр всех отправленных анкет
4. **Отправка анкет** - заполнение и сохранение анкет в БД
5. **Отслеживание статуса** - просмотр статуса анкет (черновик, отправлена, на проверке, одобрена, отклонена)

### Безопасность:

- Пароли хешируются с использованием bcrypt
- Защита от SQL-инъекций через PDO prepared statements
- Санитизация всех пользовательских данных
- Защищенные сессии с httponly cookies
- Валидация всех входных данных

## Устранение неполадок

### Ошибка подключения к БД

Проверьте:
1. Правильность данных в `config.php`
2. Существует ли база данных
3. Правильность имени пользователя и пароля
4. Доступность хоста БД

### Ошибка "Table doesn't exist"

Выполните SQL скрипт из `db/schema.sql` для создания таблиц.

### Сессии не работают

Убедитесь, что:
1. PHP сессии включены
2. Папка для сессий доступна для записи
3. В `config.php` правильно настроены параметры сессий

## Поддержка

При возникновении проблем проверьте логи ошибок PHP и MySQL.

